{% extends "admin/base.html" %}
{% load static %}

{% block extrahead %}
    {{ block.super }}
    <!-- Modern Admini Admin CSS -->
    <link rel="stylesheet" type="text/css" href="{% static 'admin/css/modern-admin.css' %}">
    
    <!-- Google-Style Loading Animation -->
    <style>
        /* Google-Style Loading Animation */
        .google-loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--bg-primary);
            z-index: 9999;
            overflow: hidden;
        }
        
        .google-loader-bar {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: linear-gradient(90deg, 
                var(--loading-primary) 0%, 
                var(--loading-secondary) 25%, 
                var(--loading-accent) 50%, 
                var(--loading-secondary) 75%, 
                var(--loading-primary) 100%);
            background-size: 200% 100%;
            animation: google-loading 1.5s ease-in-out infinite;
            box-shadow: 0 0 10px rgba(66, 133, 244, 0.3);
        }
        
        @keyframes google-loading {
            0% {
                transform: translateX(-100%);
                width: 0%;
            }
            50% {
                width: 100%;
            }
            100% {
                transform: translateX(100%);
                width: 0%;
            }
        }
        
        /* Page Loading Overlay */
        .page-loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-primary);
            z-index: 9998;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 1;
            transition: opacity 0.5s ease-out;
        }
        
        .page-loading-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .page-loading-content {
            text-align: center;
            color: var(--text-primary);
        }
        
        .page-loading-logo {
            width: 80px;
            height: 80px;
            margin-bottom: 30px;
            border-radius: 20px;
            background: var(--accent-color);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 32px rgba(66, 133, 244, 0.3);
            animation: logo-pulse 2s ease-in-out infinite;
        }
        
        .page-loading-logo img {
            width: 50px;
            height: 50px;
            filter: brightness(0) invert(1);
        }
        
        .page-loading-text {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text-primary);
        }
        
        .page-loading-subtext {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 30px;
        }
        
        .google-dots-loader {
            display: flex;
            gap: 8px;
            justify-content: center;
        }
        
        .google-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--loading-primary);
            animation: google-dot-bounce 1.4s ease-in-out infinite both;
        }
        
        .google-dot:nth-child(1) { animation-delay: -0.32s; }
        .google-dot:nth-child(2) { animation-delay: -0.16s; }
        .google-dot:nth-child(3) { animation-delay: 0s; }
        
        @keyframes google-dot-bounce {
            0%, 80%, 100% {
                transform: scale(0);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        @keyframes logo-pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 8px 32px rgba(66, 133, 244, 0.3);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 12px 40px rgba(66, 133, 244, 0.4);
            }
        }
    </style>
{% endblock %}

{% block body %}
    <!-- Google-Style Loading Bar -->
    <div class="google-loader" id="google-loader">
        <div class="google-loader-bar"></div>
    </div>
    
    <!-- Page Loading Overlay -->
    <div class="page-loading-overlay" id="page-loading-overlay">
        <div class="page-loading-content">
            <div class="page-loading-logo">
                <img src="https://cyberpanel.net/wp-content/uploads/2025/04/cyberpanel-logo-icon_only.png" alt="CyberPanel Logo">
            </div>
            <div class="page-loading-text">CyberPanel Admin</div>
            <div class="page-loading-subtext">Loading administration panel...</div>
            <div class="google-dots-loader">
                <div class="google-dot"></div>
                <div class="google-dot"></div>
                <div class="google-dot"></div>
            </div>
        </div>
    </div>
    
    {{ block.super }}
    
    <!-- Loading Animation Script -->
    <script>
        // Google-style loading animation
        (function() {
            let loadingProgress = 0;
            let isLoading = true;
            
            // Simulate loading progress
            function updateLoadingProgress() {
                if (!isLoading) return;
                
                loadingProgress += Math.random() * 15;
                if (loadingProgress > 90) {
                    loadingProgress = 90;
                }
                
                // Update progress bar width
                const loaderBar = document.querySelector('.google-loader-bar');
                if (loaderBar) {
                    loaderBar.style.width = loadingProgress + '%';
                }
                
                // Continue loading
                setTimeout(updateLoadingProgress, 200 + Math.random() * 300);
            }
            
            // Complete loading
            function completeLoading() {
                isLoading = false;
                const loaderBar = document.querySelector('.google-loader-bar');
                const loader = document.getElementById('google-loader');
                const overlay = document.getElementById('page-loading-overlay');
                
                if (loaderBar) {
                    loaderBar.style.width = '100%';
                }
                
                // Hide loading overlay after a short delay
                setTimeout(() => {
                    if (overlay) {
                        overlay.classList.add('hidden');
                    }
                }, 500);
                
                // Hide progress bar after overlay is hidden
                setTimeout(() => {
                    if (loader) {
                        loader.style.opacity = '0';
                        setTimeout(() => {
                            loader.style.display = 'none';
                        }, 300);
                    }
                }, 1000);
            }
            
            // Start loading animation
            document.addEventListener('DOMContentLoaded', function() {
                updateLoadingProgress();
                
                // Complete loading when page is fully loaded
                window.addEventListener('load', completeLoading);
                
                // Fallback: complete loading after 3 seconds max
                setTimeout(completeLoading, 3000);
            });
        })();
    </script>
{% endblock %}